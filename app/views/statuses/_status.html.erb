<% statusable = status.statusable %>
<% user_profile = status.user.profile %>
<% is_show_project_title ||= false %>

<% if statusable.present? %>
  <div class="status-item">
    <div class="avatar">
      <%= link_to image_tag(user_profile.avatar.normal.url.to_s), user_path(user_profile) %>
    </div>

    <div class="status-main">
      <div class="status-item-head">
        <%= link_to user_profile.name, user_path(user_profile) %>
        <% if is_show_project_title %>
          在 <%= link_to status.project.title, project_path(status.project) %>
        <% end %>
        <%= "#{status.action_name}了#{status.statusable_name}:" %>
      </div>

      <div class="status-item-body">
        <div class="content">
          <% if statusable.respond_to?(:publishable_type) %>
            <%= render "publications/#{statusable.publishable_type.downcase}", publication: statusable %>
          <% else %>
            <%= statusable.title %>
          <% end %>
        </div>

        <div class="actions">
          <span class="created_at">
            <%= timeago_tag status.created_at %>
          </span>
          <a href="/">回应</a>
        </div>
      </div>
    </div>
  </div>
<% end %>
